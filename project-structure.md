# Структура проекта Telegram Mini App "Экономический симулятор"

## Общая структура проекта

```
telegram-mini-app/
├── client/               # Фронтенд-часть (React.js с TypeScript)
├── server/               # Бэкенд-часть (Node.js с TypeScript)
├── .github/              # GitHub Actions для CI/CD
├── docs/                 # Документация проекта
├── .gitignore            # Игнорируемые Git файлы
├── docker-compose.yml    # Конфигурация Docker для разработки
├── README.md             # Общее описание проекта
└── project-structure.md  # Этот файл
```

## Клиентская часть (Frontend)

```
client/
├── public/                    # Статические файлы
│   ├── index.html            # Главный HTML файл
│   ├── manifest.json         # PWA манифест
│   └── assets/               # Статические ресурсы
│       ├── images/           # Изображения
│       ├── icons/            # Иконки
│       └── fonts/            # Шрифты
│
├── src/                      # Исходный код React-приложения
│   ├── api/                  # API-интеграции
│   │   ├── index.ts          # Экспорт всех API-методов
│   │   ├── auth.ts           # Методы для авторизации
│   │   ├── business.ts       # Методы для управления бизнесами
│   │   ├── drops.ts          # Методы для работы с дропами
│   │   ├── darknet.ts        # Методы для даркнет-операций
│   │   ├── shop.ts           # Методы для работы с магазином
│   │   └── ratings.ts        # Методы для рейтингов
│   │
│   ├── components/           # Многоразовые компоненты
│   │   ├── common/           # Общие компоненты
│   │   │   ├── Button/       # Компонент кнопки
│   │   │   │   ├── index.tsx # Компонент Button
│   │   │   │   └── Button.scss # Стили Button
│   │   │   ├── Card/         # Компонент карточки
│   │   │   │   ├── index.tsx # Компонент Card
│   │   │   │   └── Card.scss # Стили Card
│   │   │   ├── Modal/        # Компонент модального окна
│   │   │   │   ├── index.tsx # Компонент Modal
│   │   │   │   └── Modal.scss # Стили Modal
│   │   │   ├── Loader/       # Компонент загрузки
│   │   │   │   ├── index.tsx # Компонент Loader
│   │   │   │   └── Loader.scss # Стили Loader
│   │   │   └── ...
│   │   │
│   │   ├── Business/         # Компоненты для бизнес-модуля
│   │   │   └── index.tsx     # Экспорт бизнес-компонентов
│   │   ├── Drops/            # Компоненты для модуля дропов
│   │   │   └── index.tsx     # Экспорт компонентов дропов
│   │   ├── Darknet/          # Компоненты для даркнет-модуля
│   │   │   └── index.tsx     # Экспорт даркнет-компонентов
│   │   ├── Shop/             # Компоненты для магазина
│   │   │   └── index.tsx     # Экспорт компонентов магазина
│   │   └── Rating/           # Компоненты для рейтинга
│   │       └── index.tsx     # Экспорт компонентов рейтинга
│   │
│   ├── context/              # React Context для глобального состояния
│   │   ├── AuthContext.tsx   # Контекст для авторизации
│   │   ├── GameContext.tsx   # Контекст для игровых данных
│   │   └── ...
│   │
│   ├── hooks/                # Пользовательские React-хуки
│   │   ├── useAuth.ts        # Хук для авторизации
│   │   ├── useBusinesses.ts  # Хук для управления бизнесами
│   │   ├── useDrops.ts       # Хук для управления дропами
│   │   ├── useDarknet.ts     # Хук для даркнет-операций
│   │   └── ...
│   │
│   ├── pages/                # Компоненты страниц приложения
│   │   ├── Home/             # Главная страница
│   │   │   ├── index.tsx     # Компонент главной страницы
│   │   │   └── Home.scss     # Стили главной страницы
│   │   ├── Business/         # Страница управления бизнесом
│   │   │   ├── index.tsx     # Компонент страницы бизнеса
│   │   │   └── Business.scss # Стили страницы бизнеса
│   │   ├── Drops/            # Страница управления дропами
│   │   │   ├── index.tsx     # Компонент страницы дропов
│   │   │   └── Drops.scss    # Стили страницы дропов
│   │   ├── Darknet/          # Страница даркнета
│   │   │   ├── index.tsx     # Компонент страницы даркнета
│   │   │   └── Darknet.scss  # Стили страницы даркнета
│   │   ├── Shop/             # Страница магазина
│   │   │   ├── index.tsx     # Компонент страницы магазина
│   │   │   └── Shop.scss     # Стили страницы магазина
│   │   ├── Ratings/          # Страница рейтингов
│   │   │   ├── index.tsx     # Компонент страницы рейтингов
│   │   │   └── Ratings.scss  # Стили страницы рейтингов
│   │   ├── Profile/          # Страница профиля
│   │   │   ├── index.tsx     # Компонент страницы профиля
│   │   │   └── Profile.scss  # Стили страницы профиля
│   │   └── ...
│   │
│   ├── redux/                # Redux для управления состоянием (опционально)
│   │   ├── slices/           # Redux Toolkit slices
│   │   │   ├── userSlice.ts  # Slice для пользователя
│   │   │   ├── businessSlice.ts # Slice для бизнесов
│   │   │   └── dropsSlice.ts # Slice для дропов
│   │   ├── store.ts          # Конфигурация Redux store
│   │   └── ...
│   │
│   ├── styles/               # Стили приложения
│   │   ├── global.scss       # Глобальные стили
│   │   ├── variables.scss    # SCSS переменные
│   │   ├── mixins.scss       # SCSS миксины
│   │   └── ...
│   │
│   ├── types/                # TypeScript типы и интерфейсы
│   │   ├── index.ts          # Экспорт всех типов
│   │   ├── user.ts           # Типы для пользователя
│   │   ├── business.ts       # Типы для бизнесов
│   │   └── ...
│   │
│   ├── utils/                # Утилиты и хелперы
│   │   ├── formatters.ts     # Форматирование данных
│   │   ├── calculations.ts   # Игровые расчеты
│   │   ├── telegram.ts       # Интеграция с Telegram Mini App
│   │   └── ...
│   │
│   ├── App.tsx               # Корневой компонент приложения
│   ├── index.tsx             # Точка входа React-приложения
│   └── routes.tsx            # Конфигурация маршрутизации
│
├── .eslintrc.json           # Конфигурация ESLint
├── .prettierrc              # Конфигурация Prettier
├── jest.config.js           # Конфигурация для тестов
├── webpack.config.js        # Конфигурация Webpack
├── tsconfig.json            # Конфигурация TypeScript
├── package.json             # NPM зависимости и скрипты
└── README.md                # Инструкции по клиентской части
```

## Серверная часть (Backend)

```
server/
├── src/                     # Исходный код сервера
│   ├── api/                 # API-эндпоинты
│   │   ├── routes/          # Маршруты API
│   │   │   ├── auth.ts      # Маршруты авторизации
│   │   │   ├── business.ts  # Маршруты бизнесов
│   │   │   ├── drops.ts     # Маршруты дропов
│   │   │   ├── darknet.ts   # Маршруты даркнета
│   │   │   ├── shop.ts      # Маршруты магазина
│   │   │   └── ratings.ts   # Маршруты рейтингов
│   │   │
│   │   ├── controllers/     # Контроллеры API
│   │   │   ├── authController.ts
│   │   │   ├── businessController.ts
│   │   │   ├── dropsController.ts
│   │   │   ├── darknetController.ts
│   │   │   ├── shopController.ts
│   │   │   └── ratingsController.ts
│   │   │
│   │   └── middlewares/     # Промежуточное ПО
│   │       ├── auth.ts      # Проверка аутентификации
│   │       ├── validation.ts # Валидация запросов
│   │       ├── rateLimit.ts  # Ограничение запросов
│   │       └── ...
│   │
│   ├── config/              # Конфигурации
│   │   ├── database.ts      # Конфигурация БД
│   │   ├── telegram.ts      # Конфигурация Telegram API
│   │   ├── environment.ts   # Переменные окружения
│   │   └── ...
│   │
│   ├── db/                  # Взаимодействие с базой данных
│   │   ├── models/          # Модели данных (Mongoose/Sequelize)
│   │   │   ├── User.ts      # Модель пользователя
│   │   │   ├── Business.ts  # Модель бизнеса
│   │   │   ├── Drop.ts      # Модель дропа
│   │   │   ├── Upgrade.ts   # Модель улучшения
│   │   │   ├── Transaction.ts # Модель транзакции
│   │   │   └── ...
│   │   │
│   │   ├── repositories/    # Репозитории для работы с данными
│   │   │   ├── userRepository.ts
│   │   │   ├── businessRepository.ts
│   │   │   └── ...
│   │   │
│   │   └── migrations/      # Миграции базы данных
│   │
│   ├── services/            # Бизнес-логика
│   │   ├── authService.ts   # Сервис авторизации
│   │   ├── businessService.ts # Сервис управления бизнесами
│   │   ├── dropsService.ts  # Сервис управления дропами
│   │   ├── incomeService.ts # Сервис расчета доходов
│   │   ├── darknetService.ts # Сервис для даркнет-операций
│   │   ├── raidService.ts   # Сервис полицейских рейдов
│   │   ├── shopService.ts   # Сервис магазина
│   │   └── ratingService.ts # Сервис рейтингов
│   │
│   ├── utils/               # Утилиты и хелперы
│   │   ├── logger.ts        # Логирование
│   │   ├── errors.ts        # Обработка ошибок
│   │   ├── telegram.ts      # Интеграция с Telegram API
│   │   ├── calculations.ts  # Игровые расчеты
│   │   └── ...
│   │
│   ├── jobs/                # Фоновые задачи (cron-jobs)
│   │   ├── incomeCron.ts    # Расчет периодических доходов
│   │   ├── raidCron.ts      # Планирование полицейских рейдов
│   │   ├── ratingCron.ts    # Обновление рейтингов
│   │   └── ...
│   │
│   ├── websocket/           # WebSocket для real-time обновлений
│   │   ├── handlers/        # Обработчики WebSocket событий
│   │   ├── middlewares/     # Промежуточное ПО для WebSocket
│   │   └── index.ts         # Настройка WebSocket сервера
│   │
│   ├── types/               # TypeScript типы и интерфейсы
│   │   ├── index.ts         # Экспорт всех типов
│   │   ├── user.ts          # Типы для пользователя
│   │   ├── business.ts      # Типы для бизнесов
│   │   └── ...
│   │
│   └── app.ts               # Основной файл приложения
│
├── tests/                   # Тесты
│   ├── unit/                # Модульные тесты
│   ├── integration/         # Интеграционные тесты
│   └── fixtures/            # Тестовые данные
│
├── .eslintrc.json          # Конфигурация ESLint
├── .prettierrc             # Конфигурация Prettier
├── nodemon.json            # Конфигурация Nodemon
├── jest.config.js          # Конфигурация для тестов
├── tsconfig.json           # Конфигурация TypeScript
├── package.json            # NPM зависимости и скрипты
└── README.md               # Инструкции по серверной части
```

## Структура базы данных

База данных MongoDB будет состоять из коллекций, описанных в основном README.md файле.

## Дополнительные директории

### Документация (docs/)

```
docs/
├── api/                    # Документация API
│   ├── swagger.yaml        # Swagger/OpenAPI спецификация
│   └── endpoints/          # Примеры запросов и ответов
│
├── architecture/           # Архитектурные диаграммы
├── diagrams/               # Диаграммы процессов и база данных
├── setup-guide.md          # Руководство по настройке
└── deployment.md           # Инструкции по развертыванию
```

### CI/CD (.github/)

```
.github/
├── workflows/              # Рабочие процессы GitHub Actions
│   ├── deploy.yml          # Скрипт для развертывания
│   ├── test.yml            # Скрипт для тестирования
│   └── build.yml           # Скрипт для сборки
└── ISSUE_TEMPLATE/         # Шаблоны для GitHub Issues
```

## Примечания по структуре

1. **Модульная организация**: 
   - Код разделен на модули по функциональности (бизнес, дропы, даркнет и т.д.)
   - Каждый модуль содержит свои компоненты, API-методы, бизнес-логику

2. **Разделение ответственности**:
   - Четкое разделение между представлением (React-компоненты), данными (API, Redux) и логикой (хуки, сервисы)
   - Бэкенд следует архитектуре контроллер-сервис-репозиторий

3. **Масштабируемость**:
   - Структура позволяет легко добавлять новые модули и функциональность
   - Переиспользуемые компоненты выделены в отдельные директории

4. **Поддержка**:
   - Организация папок облегчает навигацию по коду
   - Документация и тесты находятся рядом с кодом, который они документируют/тестируют

5. **TypeScript**:
   - Типизация всех компонентов и данных
   - Отдельная директория `types` для централизованного хранения интерфейсов
   - Использование `.tsx` для React-компонентов и `.ts` для остальных файлов

6. **Конфигурация**:
   - Конфигурационные файлы разделены по назначению
   - Переменные окружения используются для разных сред (разработка, тестирование, продакшн)

## Начало разработки

1. Клонировать репозиторий
2. Установить зависимости для клиентской и серверной части
3. Настроить переменные окружения
4. Запустить сервер разработки

## Команды для разработки

**Клиент**:
```bash
cd client
npm install
npm start           # Запуск dev-сервера
npm run build       # Сборка для продакшн
npm test            # Запуск тестов
```

**Сервер**:
```bash
cd server
npm install
npm run dev         # Запуск с nodemon
npm run start       # Запуск сервера
npm test            # Запуск тестов
```

**Docker**:
```bash
docker-compose up   # Запуск всего проекта через Docker
``` 