# План разработки Telegram Mini App "Экономический симулятор"

## Дизайн-концепция
- **Стиль**: Тёмный с акцентом на малиновый цвет (#E91E63)
- **Подход**: Минималистичный, современный интерфейс
- **Типографика**: Sans-serif шрифты (Inter или Roboto)
- **Анимации**: Плавные переходы между экранами, тонкие микроанимации интерактивных элементов
- **Общая атмосфера**: Сдержанная, технологичная, с элементами киберпанка для даркнет-раздела
- **Адаптация под телефоны**: Для телефонов режим Fullsceen (Miniapp telegram). И отступы для устройств сверху и снизу (сверху 90px). Кнопки назад выполнить из telegram backbuttom

## Основные страницы

1. **Экран загрузки (Splash Screen)**
   - Минималистичная анимация логотипа (ECOSIM) ECO - малиновым SIM - белым текстом (это название)
   - Загрузка данных пользователя
   - Интеграция с Telegram API для авторизации

2. **Главный экран (Dashboard)**
   - Отображение текущего баланса крупным шрифтом
   - Карточки с основными бизнесами и их доходностью
   - Счётчик дохода в реальном времени
   - Кнопки основных разделов размиными дизайнами
   - Нижнее меню навигации с иконками основных разделов (главная, профиль, маркет, рейтинг)
   - Кнопка "Пригласить друзей" для получения дропов

3. **Страница бизнесов**
   - Список доступных и приобретённых бизнесов
   - Фильтры по типу и доходности
   - Информация о стоимости и доходе каждого бизнеса
   - Возможность улучшения существующих бизнесов

4. **Страница дропов**
   - Список приглашённых пользователей в виде карточек 3х3 (дропов)
   - Визуальное отображение редкости (обычные, редкие, эпические, легендарные) - возможность за деньги поднять редкость и заработок
   - Информация о генерируемом доходе
   - Возможности апгрейда дропов
   - Общий счетчик кол-во дропов
   - Счетчик потеренных дропов за последнее время (24 час)
   - Кнопка массового управления дропами (массово улучшить, отпустить, доплатить)

5. **Даркнет**
   - Особый визуальный стиль с усилением тёмных оттенков и неоновыми акцентами
   - Индикатор уровня защиты от полиции
   - Список высокодоходных нелегальных бизнесов
   - Таймер до следующего возможного рейда полиции
   - Ограниченный бизнес

6. **Магазин улучшений**
   - Категории улучшений (бизнесы, дропы, защита, донат)
   - Детальные описания эффектов от улучшений
   - Возможность предпросмотра результата

7. **Профиль игрока**
   - Статистика доходов и расходов
   - Достижения и награды
   - История транзакций
   - Рейтинг относительно других игроков

8. **Рейтинг**
   - Глобальная таблица лидеров
   - Еженедельные и месячные соревнования
   - Награды за высокие места

9. **Донатный магазин**
   - Премиум-пакеты
   - VIP-статусы
   - Специальные предложения

## Описание проекта
Мобильное приложение формата Telegram Mini App представляет собой экономический симулятор с элементами стратегии. Игроки развивают собственную экономическую империю, приглашают друзей для увеличения дохода и соревнуются в рейтинге.

## Технические требования
- Формат исключительно для мобильных устройств (соотношение 9:16)
- Интеграция исключительно с Telegram API
- Авторизация пользователей через Telegram ID
- Адаптивный и современный UI/UX
- Бэкенд для хранения данных игроков и обработки игровой логики

## Основная механика
### Система дропов (приглашённых пользователей)
- Каждый приглашённый пользователь приносит основному игроку пассивный доход в минуту
- Уровни дропов (обычные, редкие, эпические, легендарные) с разным доходом
- Система апгрейда дропов для увеличения их эффективности
- Бонусы за количество приглашённых людей

### Экономическая система
- Начальный капитал для новых игроков
- Автоматизированная система заработка (не кликер)
- Возможности инвестирования для увеличения пассивного дохода
- Различные бизнес-направления с разным уровнем дохода и риска

### Тёмный рынок (даркнет)
- Особый раздел с высокодоходными, но рискованными возможностями заработка
- Система "полицейских рейдов" с возможной потерей средств
- Защита от полиции (можно приобрести или улучшить)
- Особые товары и возможности, доступные только в даркнете

### Прогрессия игрока
- Уровни развития бизнеса
- Достижения и награды за прогресс
- Специальные события и вызовы

## Функциональные модули

### 1. Модуль авторизации и профиля
- Интеграция с Telegram Login Widget
- Профиль игрока с основными показателями
- История транзакций и действий

### 2. Модуль управления бизнесом
- Интерфейс управления различными бизнес-направлениями
- Автоматизированные процессы генерации дохода
- Статистика и аналитика доходности

### 3. Модуль дропов и приглашений
- Система генерации реферальных ссылок
- Учёт и отображение приглашённых пользователей
- Интерфейс управления дропами и их улучшениями

### 4. Даркнет-модуль
- Особый дизайн и атмосфера
- Механика защиты от полиции
- Высокорисковые предприятия с высокой доходностью

### 5. Магазин улучшений
- Различные категории улучшений (бизнес, безопасность, эффективность)
- Система прогрессии улучшений
- Визуальное отображение эффекта от улучшений

### 6. Донатный раздел
- Премиум-валюта
- Особые преимущества для доната
- Баланс между P2W и F2P механиками

### 7. Система рейтинга
- Глобальный рейтинг игроков
- Еженедельные и месячные соревнования
- Награды для лидеров рейтинга

## Детальная игровая логика

### Экономическая прогрессия
1. **Начальный этап**
   - Игрок получает стартовый капитал (1000 монет)
   - Доступны базовые бизнесы с низким доходом (киоск, курьерская служба)
   - Возврат инвестиций: 5-8% в час
   - Доступны базовые улучшения для бизнеса

2. **Средний этап**
   - Более прибыльные бизнесы (магазин, сеть доставки)
   - Доступ к первым даркнет-возможностям
   - Апгрейды для дропов (увеличение дохода на 10-30%)
   - Возврат инвестиций: 8-15% в час

3. **Продвинутый этап**
   - Высокодоходные легальные бизнесы (сеть магазинов, фабрика)
   - Расширенные возможности даркнета
   - Продвинутая защита от полиции
   - Возврат инвестиций: 15-25% в час

4. **Конечная игра**
   - Глобальная бизнес-империя
   - Полный доступ ко всем даркнет-возможностям
   - Конкуренция за топ рейтинга
   - Возврат инвестиций: 25-40% в час

### Механика дропов
- Базовый доход от дропа: 10 монет в час
- Формула прогрессии: (базовый_доход × уровень_дропа × множитель_качества)
- Уровни качества дропов:
  - Обычный: множитель 1.0
  - Редкий: множитель 2.5
  - Эпический: множитель 6.0
  - Легендарный: множитель 15.0
- Шанс получения редких дропов:
  - Обычный: 80%
  - Редкий: 15%
  - Эпический: 4%
  - Легендарный: 1%
- Система апгрейда: возможность повышения уровня дропа за игровую валюту
- Механика "слияния дропов": комбинирование нескольких дропов для создания более высокого уровня

### Система даркнета
- Периодичность рейдов полиции: каждые 12-24 часа (случайный интервал)
- Шанс успешного рейда на начальном уровне защиты: 40%
- Штраф при поимке: 30-50% от заработанных в даркнете средств
- Уровни защиты от полиции:
  - Базовая (снижает шанс рейда на 10%)
  - Продвинутая (снижает шанс на 30%)
  - Высокотехнологичная (снижает шанс на 60%)
  - Неуязвимая (снижает шанс на 90%)
- Особые товары даркнета: бустеры к доходу, временное увеличение шансов редких дропов

### Система достижений
- Ежедневные задания с наградами
- Долгосрочные достижения (вехи прогресса)
- Особые события с ограниченным временем
- Коллекции особых предметов

## Подробный план разработки

### 1. Проектирование и подготовка (2-3 недели)
- **Документация**:
  - Детализация игрового баланса
  - Описание всех игровых механик
  - Создание пользовательских историй
  - Составление ER-диаграммы для базы данных

- **Проектирование UI/UX**:
  - Создание вайрфреймов в Figma для всех экранов
  - Разработка дизайн-системы
  - Создание прототипа основных экранов
  - Тестирование пользовательского опыта

### 2. Настройка инфраструктуры (1 неделя)
- **Фронтенд**:
  - Создание проекта на React.js с TypeScript
  - Настройка сборки с использованием Webpack
  - Интеграция с Telegram Mini App SDK
  - Настройка маршрутизации (React Router)
  - Настройка управления состоянием (Redux или Context API)

- **Бэкенд**:
  - Создание проекта на Node.js с Express
  - Настройка MongoDB для хранения данных
  - Создание системы аутентификации через Telegram
  - Настройка CI/CD для автоматического развертывания

### 3. Разработка основного функционала (4-6 недель)
- **Фронтенд** (React.js + TypeScript):
  - Реализация авторизации через Telegram
  - Разработка главного экрана с бизнесами
  - Создание интерфейса для управления дропами
  - Реализация магазина улучшений
  - Внедрение анимаций и визуальных эффектов

- **Бэкенд** (Node.js + Express + MongoDB):
  - Реализация API для управления игровыми данными
  - Создание системы расчета доходов
  - Внедрение логики даркнета и рейдов
  - Разработка системы рейтингов
  - Интеграция с Telegram Bot API для уведомлений

### 4. Разработка вспомогательных систем (2-3 недели)
- **Система уведомлений**:
  - Push-уведомления через Telegram
  - Внутриигровые уведомления
  - Оповещения о рейдах и важных событиях

- **Аналитическая система**:
  - Трекинг пользовательских действий
  - Анализ ретеншена и конверсии
  - Метрики монетизации

- **Админ-панель**:
  - Интерфейс для управления игровыми параметрами
  - Мониторинг активности пользователей
  - Инструменты для модерации

### 5. Тестирование и оптимизация (2-3 недели)
- Юнит-тестирование основных компонентов
- Интеграционное тестирование
- Нагрузочное тестирование
- Тестирование игрового баланса
- Оптимизация производительности

### 6. Запуск и поддержка
- Публикация в Telegram Mini Apps
- Мониторинг метрик и пользовательского опыта
- Регулярные обновления с новым контентом
- Сбор и анализ обратной связи

## Подробный технический стек

### Фронтенд
- **Основной фреймворк**: React.js с TypeScript
- **Стилизация**: 
  - SCSS для стилей
  - Styled Components для компонентного подхода
- **Управление состоянием**: 
  - Redux Toolkit для глобального состояния
  - React Query для работы с API
- **Анимации**:
  - Framer Motion для сложных анимаций
  - CSS анимации для простых эффектов
- **Сборка**: 
  - Webpack 5
  - Babel
- **Тестирование**:
  - Jest для модульных тестов
  - React Testing Library для тестирования компонентов

### Бэкенд
- **Сервер**: Node.js с Express.js
- **База данных**:
  - MongoDB для хранения игровых данных
  - Redis для кэширования и временных данных
- **Аутентификация**:
  - JWT токены
  - Telegram Login Widget
- **API**: RESTful API с документацией на Swagger
- **Валидация**: Joi для валидации данных
- **Логирование**: Winston для логирования ошибок и событий
- **Тестирование**: Mocha и Chai для API-тестов

### Python компоненты
- **Скрипты Python**:
  - `bot.py` - Запуск бота, который отрпавляет ссылку на mini app
  - `config.py` - Кофигурационный файл
  - `server.py` - Запуск сервера

### DevOps
- **Контейнеризация**: Docker
- **CI/CD**: GitHub Actions
- **Хостинг**: 
  - AWS для основной инфраструктуры
  - Cloudflare для CDN и защиты от DDoS
- **Мониторинг**: 
  - Sentry для отслеживания ошибок
  - Prometheus для мониторинга сервера
  - Grafana для визуализации метрик

### Инструменты разработки
- **Управление кодом**: Git с GitHub
- **Управление проектом**: Jira или ClickUp
- **Коммуникация**: Slack или Discord
- **Документация**: Notion или Confluence

## Структура базы данных

### Коллекции MongoDB

1. **Users**
   ```json
   {
     "user_id": "String (Telegram ID)",
     "username": "String",
     "balance": "Number",
     "premium_balance": "Number",
     "total_income": "Number",
     "created_at": "Date",
     "last_active": "Date",
     "businesses": ["ObjectId (reference to Businesses)"],
     "drops": ["ObjectId (reference to Drops)"],
     "upgrades": ["ObjectId (reference to Upgrades)"],
     "achievements": ["ObjectId (reference to Achievements)"],
     "darknet_status": {
       "protection_level": "Number",
       "last_raid_time": "Date",
       "darknet_businesses": ["ObjectId (reference to DarknetBusinesses)"]
     }
   }
   ```

2. **Businesses**
   ```json
   {
     "business_id": "ObjectId",
     "owner_id": "String (Telegram ID)",
     "name": "String",
     "type": "String",
     "level": "Number",
     "income_per_hour": "Number",
     "cost": "Number",
     "upgrade_cost": "Number",
     "purchased_at": "Date"
   }
   ```

3. **Drops**
   ```json
   {
     "drop_id": "ObjectId",
     "owner_id": "String (Telegram ID)",
     "invitee_id": "String (Telegram ID)",
     "quality": "String (common, rare, epic, legendary)",
     "level": "Number",
     "income_multiplier": "Number",
     "income_per_hour": "Number",
     "created_at": "Date"
   }
   ```

4. **Upgrades**
   ```json
   {
     "upgrade_id": "ObjectId",
     "owner_id": "String (Telegram ID)",
     "type": "String",
     "level": "Number",
     "effect": {
       "type": "String",
       "value": "Number"
     },
     "purchased_at": "Date",
     "expires_at": "Date (nullable)"
   }
   ```

5. **Transactions**
   ```json
   {
     "transaction_id": "ObjectId",
     "user_id": "String (Telegram ID)",
     "amount": "Number",
     "type": "String",
     "description": "String",
     "timestamp": "Date"
   }
   ```

6. **Achievements**
   ```json
   {
     "achievement_id": "ObjectId",
     "user_id": "String (Telegram ID)",
     "type": "String",
     "title": "String",
     "description": "String",
     "reward": {
       "type": "String",
       "value": "Number"
     },
     "completed_at": "Date"
   }
   ```

7. **Ratings**
   ```json
   {
     "rating_id": "ObjectId",
     "user_id": "String (Telegram ID)",
     "score": "Number",
     "rank": "Number",
     "last_updated": "Date"
   }
   ```

## Монетизация
- Внутриигровые покупки премиум-валюты
- Особые улучшения за донат
- VIP-статус с особыми преимуществами
- Косметические улучшения

## Метрики успеха
- Количество активных пользователей (DAU/MAU)
- Коэффициент удержания
- Средний доход на пользователя (ARPU)
- Коэффициент конверсии в платящих пользователей
- Виральность (количество приглашений на одного пользователя) 